<%= render "header" %>

<div class="d-flex justify-content-center">
  <% if !@rendered_from_create %>
    <%= render 'navigation_links', prev_path: new_attendance_path(date: @date.prev_day), next_path: new_attendance_path(date: @date.next_day), action_name: '作業記録更新', action_path: show_date_attendances_path(date: @date) %>
  <% else %>
    <h1><%= @date %></h1>
  <% end %>
</div>

<%= form_with(model: @attendance_form, url: create_multiple_attendances_path, local: true) do |f| %>
  <table class="attendances-table">
    <thead>
      <th>依頼主</th>
      <th>工事場所</th>
      <th>作業内容</th>
      <th>発着時間</th>
      <th>作業員</th>
      <th>備考</th>
      <th>使用車両</th>
    </thead>
    <tbody id="attendance-forms">
      <% @attendance_form.attendances.each_with_index do |attendance, index| %>
        <%= render 'attendance_fields', f: f, attendance: attendance, index: index %>
      <% end %>
      <% new_index = @attendance_form.attendances.length %>
      <%= render 'attendance_fields', f: f, attendance: Attendance.new, index: new_index, style: 'display: none' %>
    </tbody>
  </table>
  <div class="register text-center my-3"><%= f.submit "登録", class:"button" %></div>
<% end %>
<button id="add-row" data-index="<%= @attendance_form.attendances.length %>" class="btn btn-primary">行を追加</button>
